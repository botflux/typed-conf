[env]
NODE_ENV="production"

[tools]
node = "24.13.1"
pnpm = "10.29.3"

[hooks]
enter = [
    "mise install",
    "mise generate git-pre-commit --write"
]

[tasks.pre-commit]
description="Run the pre-commit hook"
run = """
# Filter for TS/TSX files from staged files
ts_files=$(echo "$STAGED" | grep -E '.(ts|tsx)$' || true)

if [ -n "$ts_files" ]; then
  pnpm biome check --write $ts_files
  # Re-stage files that biome may have modified
  echo "$ts_files" | xargs git add
fi

pnpm typecheck
"""